{"remainingRequest":"/Users/bluetuna/Desktop/dongwon/Git_repo/study/study/vue.js/LazyLoading/vue-lazy-loading/node_modules/babel-loader/lib/index.js!/Users/bluetuna/Desktop/dongwon/Git_repo/study/study/vue.js/LazyLoading/vue-lazy-loading/node_modules/eslint-loader/index.js??ref--13-0!/Users/bluetuna/Desktop/dongwon/Git_repo/study/study/vue.js/LazyLoading/vue-lazy-loading/src/directives/CustomDirective.js","dependencies":[{"path":"/Users/bluetuna/Desktop/dongwon/Git_repo/study/study/vue.js/LazyLoading/vue-lazy-loading/src/directives/CustomDirective.js","mtime":1622635063911},{"path":"/Users/bluetuna/Desktop/dongwon/Git_repo/study/study/vue.js/LazyLoading/vue-lazy-loading/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bluetuna/Desktop/dongwon/Git_repo/study/study/vue.js/LazyLoading/vue-lazy-loading/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/bluetuna/Desktop/dongwon/Git_repo/study/study/vue.js/LazyLoading/vue-lazy-loading/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9ibHVldHVuYS9EZXNrdG9wL2Rvbmd3b24vR2l0X3JlcG8vc3R1ZHkvc3R1ZHkvdnVlLmpzL0xhenlMb2FkaW5nL3Z1ZS1sYXp5LWxvYWRpbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CnZhciBJbWdMYXp5TG9hZGluZyA9IHsKICBpbnNlcnRlZDogZnVuY3Rpb24gaW5zZXJ0ZWQoZWwsIGJpbmRpbmcpIHsKICAgIHZhciBvcHRpb25zID0gewogICAgICByb290OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJpbmRpbmcudmFsdWUucm9vdFNjcm9sbEVsKSwKICAgICAgLy8gc2Nyb2xsIGV2ZW5066W8IOqwkOyLnO2VoCBlbGVtZW5066W8IOyEpOyglSDtlanri4jri6QKICAgICAgcm9vdE1hcmdpbjogIjEwMDBweCAwcHgiCiAgICB9OyAvLyDsnbTrr7jsp4Ag66Gc65OcIOuQmOq4sOyghOyXkCBwbGFjZWhvbGRlcuulvCDrs7Tsl6zso7zquLAg7JyE7ZW0IGVsZW1lbnTrpbwg7IOd7ISx7ZWp64uI64ukCgogICAgdmFyIHBsYWNlaG9sZGVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHBsYWNlaG9sZGVyRWwuc2V0QXR0cmlidXRlKCJzdHlsZSIsICJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTowOyBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjO3RyYW5zaXRpb24gOiBvcGFjaXR5IDFzIGVhc2UtaW4tb3V0OyIpOwogICAgZWwuYXBwZW5kQ2hpbGQocGxhY2Vob2xkZXJFbCk7IC8vIOqwkOyLnAoKICAgIGVsLm9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChjaGFuZ2VzKSB7CiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjaGFuZ2VzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGNoYW5nZSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgIC8vIGVsZW1lbnTqsIAg64W47LacIOuQmOuKlOqyg+ydhCDqsoDsgqztlanri4jri6QKICAgICAgICAgIGlmIChjaGFuZ2UuaW50ZXJzZWN0aW9uUmF0aW8gPiAwKSB7CiAgICAgICAgICAgIC8vIOuFuOy2nOydtCDrkJjrqbQg7Ji17KCA67KE66W8IO2VtOygnO2VqeuLiOuLpAogICAgICAgICAgICBlbC5vYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgIHZhciBpbWdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgICBpbWdFbC5zZXRBdHRyaWJ1dGUoInNyYyIsIGJpbmRpbmcudmFsdWUpOyAvLyDsnbTrr7jsp4Ag66Gc65Oc6rCAIOuQmOuptCBpbWftg5zqt7jrpbwgYXBwZW5k7ZWp64uI64ukCiAgICAgICAgICAgIC8vIHBsYWNlaG9sZGVy64qUIOygnOqxsO2VtOykjeuLiOuLpC4KCiAgICAgICAgICAgIGltZ0VsLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW1nIG9ubG9hZCA6ICcgKyBiaW5kaW5nLnZhbHVlKTsKICAgICAgICAgICAgICBwbGFjZWhvbGRlckVsLnN0eWxlWyJvcGFjaXR5Il0gPSAwOwogICAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGltZ0VsKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyRWwucmVtb3ZlKCk7CiAgICAgICAgICAgICAgfSwgNjAwKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQogICAgfSwgb3B0aW9ucyk7CiAgICBlbC5vYnNlcnZlci5vYnNlcnZlKGVsKTsKICB9LAogIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKGVsKSB7CiAgICBpZiAoZWwub2JzZXJ2ZXIpIHsKICAgICAgZWwub2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgfQogIH0KfTsKVnVlLmRpcmVjdGl2ZSgnaW1nLWxhenktbG9hZGluZycsIEltZ0xhenlMb2FkaW5nKTs="},{"version":3,"sources":["/Users/bluetuna/Desktop/dongwon/Git_repo/study/study/vue.js/LazyLoading/vue-lazy-loading/src/directives/CustomDirective.js"],"names":["Vue","ImgLazyLoading","inserted","el","binding","options","root","document","querySelector","value","rootScrollEl","rootMargin","placeholderEl","createElement","setAttribute","appendChild","observer","IntersectionObserver","changes","change","intersectionRatio","disconnect","imgEl","onload","console","log","style","setTimeout","remove","observe","unbind","directive"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AAEA,IAAMC,cAAc,GAAG;AACnBC,EAAAA,QADmB,oBACVC,EADU,EACNC,OADM,EACG;AAClB,QAAIC,OAAO,GAAG;AACVC,MAAAA,IAAI,EAAEC,QAAQ,CAACC,aAAT,CAAuBJ,OAAO,CAACK,KAAR,CAAcC,YAArC,CADI;AACgD;AAC1DC,MAAAA,UAAU,EAAE;AAFF,KAAd,CADkB,CAMlB;;AACA,QAAIC,aAAa,GAAGL,QAAQ,CAACM,aAAT,CAAuB,KAAvB,CAApB;AACAD,IAAAA,aAAa,CAACE,YAAd,CAA2B,OAA3B,EAAoC,sHAApC;AAEAX,IAAAA,EAAE,CAACY,WAAH,CAAeH,aAAf,EAVkB,CAYlB;;AACAT,IAAAA,EAAE,CAACa,QAAH,GAAc,IAAIC,oBAAJ,CAAyB,UAAAC,OAAO,EAAI;AAAA,iDACzBA,OADyB;AAAA;;AAAA;AAC9C,4DAA8B;AAAA,cAAnBC,MAAmB;;AAC1B;AACA,cAAIA,MAAM,CAACC,iBAAP,GAA2B,CAA/B,EAAkC;AAC9B;AACAjB,YAAAA,EAAE,CAACa,QAAH,CAAYK,UAAZ;AAEA,gBAAIC,KAAK,GAAGf,QAAQ,CAACM,aAAT,CAAuB,KAAvB,CAAZ;AACAS,YAAAA,KAAK,CAACR,YAAN,CAAmB,KAAnB,EAA0BV,OAAO,CAACK,KAAlC,EAL8B,CAO9B;AACA;;AACAa,YAAAA,KAAK,CAACC,MAAN,GAAe,YAAY;AACvBC,cAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkBrB,OAAO,CAACK,KAAtC;AACAG,cAAAA,aAAa,CAACc,KAAd,CAAoB,SAApB,IAAiC,CAAjC;AACAvB,cAAAA,EAAE,CAACY,WAAH,CAAeO,KAAf;AACAK,cAAAA,UAAU,CAAC,YAAM;AACbf,gBAAAA,aAAa,CAACgB,MAAd;AACH,eAFS,EAEP,GAFO,CAAV;AAGH,aAPD;AAQH;AACJ;AArB6C;AAAA;AAAA;AAAA;AAAA;AAsBjD,KAtBa,EAsBXvB,OAtBW,CAAd;AAwBAF,IAAAA,EAAE,CAACa,QAAH,CAAYa,OAAZ,CAAoB1B,EAApB;AACH,GAvCkB;AAwCnB2B,EAAAA,MAxCmB,kBAwCZ3B,EAxCY,EAwCN;AACT,QAAIA,EAAE,CAACa,QAAP,EAAiB;AACbb,MAAAA,EAAE,CAACa,QAAH,CAAYK,UAAZ;AACH;AACJ;AA5CkB,CAAvB;AA+CArB,GAAG,CAAC+B,SAAJ,CAAc,kBAAd,EAAkC9B,cAAlC","sourcesContent":["import Vue from 'vue';\n\nconst ImgLazyLoading = {\n    inserted(el, binding) {\n        let options = {\n            root: document.querySelector(binding.value.rootScrollEl), // scroll event를 감시할 element를 설정 합니다\n            rootMargin: \"1000px 0px\"\n        };\n\n        // 이미지 로드 되기전에 placeholder를 보여주기 위해 element를 생성합니다\n        var placeholderEl = document.createElement(\"div\");\n        placeholderEl.setAttribute(\"style\", \"position: absolute; top: 0; left: 0; right: 0; bottom:0; background-color: #ccc;transition : opacity 1s ease-in-out;\");\n\n        el.appendChild(placeholderEl);\n\n        // 감시\n        el.observer = new IntersectionObserver(changes => {\n            for (const change of changes) {\n                // element가 노출 되는것을 검사합니다\n                if (change.intersectionRatio > 0) {\n                    // 노출이 되면 옵저버를 해제합니다\n                    el.observer.disconnect();\n\n                    var imgEl = document.createElement(\"img\");\n                    imgEl.setAttribute(\"src\", binding.value);\n\n                    // 이미지 로드가 되면 img태그를 append합니다\n                    // placeholder는 제거해줍니다.\n                    imgEl.onload = function () {\n                        console.log('img onload : ' + binding.value);\n                        placeholderEl.style[\"opacity\"] = 0;\n                        el.appendChild(imgEl);\n                        setTimeout(() => {\n                            placeholderEl.remove();\n                        }, 600)\n                    };\n                }\n            }\n        }, options);\n\n        el.observer.observe(el);\n    },\n    unbind(el, ) {\n        if (el.observer) {\n            el.observer.disconnect();\n        }\n    },\n};\n\nVue.directive('img-lazy-loading', ImgLazyLoading);"]}]}